(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{19553:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return n(32601)}])},32601:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return te}});var r=n(28520),o=n.n(r),a=n(85893),s=n(67294),i=n(83544),c=n(87462),l=n(13871),u=n(86010),p=(n(45697),n(98459)),d=n(28935),f=n(12519),h=n(92248);function v(e){var t=e.children,n=e.className,r=(0,u.Z)(n),o=(0,d.Z)(v,e),a=(0,f.Z)(v,e);return s.createElement(a,(0,c.Z)({},o,{className:r}),t)}v.handledProps=["as","children","className"],v.defaultProps={as:"tbody"},v.propTypes={};var m=v,b=n(69591),y=n(45150);function w(e){var t=e.active,n=e.children,r=e.className,o=e.collapsing,a=e.content,i=e.disabled,l=e.error,v=e.icon,m=e.negative,b=e.positive,g=e.selectable,x=e.singleLine,j=e.textAlign,Z=e.verticalAlign,P=e.warning,R=e.width,k=(0,u.Z)((0,p.lG)(t,"active"),(0,p.lG)(o,"collapsing"),(0,p.lG)(i,"disabled"),(0,p.lG)(l,"error"),(0,p.lG)(m,"negative"),(0,p.lG)(b,"positive"),(0,p.lG)(g,"selectable"),(0,p.lG)(x,"single line"),(0,p.lG)(P,"warning"),(0,p.X4)(j),(0,p.Ok)(Z),(0,p.H0)(R,"wide"),r),O=(0,d.Z)(w,e),G=(0,f.Z)(w,e);return h.kK(n)?s.createElement(G,(0,c.Z)({},O,{className:k}),y.Z.create(v),a):s.createElement(G,(0,c.Z)({},O,{className:k}),n)}w.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],w.defaultProps={as:"td"},w.propTypes={},w.create=(0,b.u5)(w,(function(e){return{content:e}}));var g=w;function x(e){var t=e.children,n=e.className,r=e.content,o=e.fullWidth,a=(0,u.Z)((0,p.lG)(o,"full-width"),n),i=(0,d.Z)(x,e),l=(0,f.Z)(x,e);return s.createElement(l,(0,c.Z)({},i,{className:a}),h.kK(t)?r:t)}x.handledProps=["as","children","className","content","fullWidth"],x.defaultProps={as:"thead"},x.propTypes={};var j=x;function Z(e){var t=e.as,n=(0,d.Z)(Z,e);return s.createElement(j,(0,c.Z)({},n,{as:t}))}Z.handledProps=["as"],Z.propTypes={},Z.defaultProps={as:"tfoot"};var P=Z;function R(e){var t=e.as,n=e.className,r=e.sorted,o=(0,u.Z)((0,p.cD)(r,"sorted"),n),a=(0,d.Z)(R,e);return s.createElement(g,(0,c.Z)({},a,{as:t,className:o}))}R.handledProps=["as","className","sorted"],R.propTypes={},R.defaultProps={as:"th"};var k=R;function O(e){var t=e.active,n=e.cellAs,r=e.cells,o=e.children,a=e.className,i=e.disabled,v=e.error,m=e.negative,b=e.positive,y=e.textAlign,w=e.verticalAlign,x=e.warning,j=(0,u.Z)((0,p.lG)(t,"active"),(0,p.lG)(i,"disabled"),(0,p.lG)(v,"error"),(0,p.lG)(m,"negative"),(0,p.lG)(b,"positive"),(0,p.lG)(x,"warning"),(0,p.X4)(y),(0,p.Ok)(w),a),Z=(0,d.Z)(O,e),P=(0,f.Z)(O,e);return h.kK(o)?s.createElement(P,(0,c.Z)({},Z,{className:j}),(0,l.Z)(r,(function(e){return g.create(e,{defaultProps:{as:n}})}))):s.createElement(P,(0,c.Z)({},Z,{className:j}),o)}O.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],O.defaultProps={as:"tr",cellAs:"td"},O.propTypes={},O.create=(0,b.u5)(O,(function(e){return{cells:e}}));var G=O;function _(e){var t=e.attached,n=e.basic,r=e.celled,o=e.children,a=e.className,i=e.collapsing,v=e.color,b=e.columns,y=e.compact,w=e.definition,g=e.fixed,x=e.footerRow,Z=e.headerRow,R=e.headerRows,k=e.inverted,O=e.padded,A=e.renderBodyRow,N=e.selectable,E=e.singleLine,C=e.size,q=e.sortable,T=e.stackable,B=e.striped,z=e.structured,F=e.tableData,H=e.textAlign,S=e.unstackable,D=e.verticalAlign,L=(0,u.Z)("ui",v,C,(0,p.lG)(r,"celled"),(0,p.lG)(i,"collapsing"),(0,p.lG)(w,"definition"),(0,p.lG)(g,"fixed"),(0,p.lG)(k,"inverted"),(0,p.lG)(N,"selectable"),(0,p.lG)(E,"single line"),(0,p.lG)(q,"sortable"),(0,p.lG)(T,"stackable"),(0,p.lG)(B,"striped"),(0,p.lG)(z,"structured"),(0,p.lG)(S,"unstackable"),(0,p.sU)(t,"attached"),(0,p.sU)(n,"basic"),(0,p.sU)(y,"compact"),(0,p.sU)(O,"padded"),(0,p.X4)(H),(0,p.Ok)(D),(0,p.H0)(b,"column"),"table",a),X=(0,d.Z)(_,e),K=(0,f.Z)(_,e);if(!h.kK(o))return s.createElement(K,(0,c.Z)({},X,{className:L}),o);var U={defaultProps:{cellAs:"th"}},I=(Z||R)&&s.createElement(j,null,G.create(Z,U),(0,l.Z)(R,(function(e){return G.create(e,U)})));return s.createElement(K,(0,c.Z)({},X,{className:L}),I,s.createElement(m,null,A&&(0,l.Z)(F,(function(e,t){return G.create(A(e,t))}))),x&&s.createElement(P,null,G.create(x)))}_.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],_.defaultProps={as:"table"},_.propTypes={},_.Body=m,_.Cell=g,_.Footer=P,_.Header=j,_.HeaderCell=k,_.Row=G;var A=_,N=n(80967),E=n(96215),C=n(14148),q=n(1508);function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t,n,r,o,a,s){try{var i=e[a](s),c=i.value}catch(l){return void n(l)}i.done?t(c):Promise.resolve(c).then(r,o)}function z(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){B(a,r,o,s,i,"next",e)}function i(e){B(a,r,o,s,i,"throw",e)}s(void 0)}))}}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return!t||"object"!==K(t)&&"function"!==typeof t?T(e):t}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var o=D(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}var I=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(i,e);var t,n,r,s=U(i);function i(){var e;return F(this,i),S(T(e=s.apply(this,arguments)),"onApprove",z(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,C.Z)(this.props.address),e.next=3,q.Z.eth.getAccounts();case 3:return n=e.sent,e.next=6,t.methods.approveRequest(this.props.id).send({from:n[0]});case 6:case"end":return e.stop()}}),e,this)})).bind(e)).bind(T(e))),S(T(e),"onFinalize",z(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,C.Z)(this.props.address),e.next=3,q.Z.eth.getAccounts();case 3:return n=e.sent,e.next=6,t.methods.finalizeRequest(this.props.id).send({from:n[0]});case 6:case"end":return e.stop()}}),e,this)})).bind(e)).bind(T(e))),e}return t=i,(n=[{key:"render",value:function(){var e=this,t=this,n=A.Row,r=A.Cell,o=this.props,s=o.id,i=o.request,c=o.approversCount,l=i.approvalCount>c/2;return(0,a.jsxs)(n,{disabled:i.complete,positive:l&&!i.complete,children:[(0,a.jsx)(r,{children:s}),(0,a.jsx)(r,{children:i.description}),(0,a.jsx)(r,{children:q.Z.utils.fromWei(i.value)}),(0,a.jsx)(r,{children:i.recipient}),(0,a.jsxs)(r,{children:[i.approvalCount,"/",c]}),(0,a.jsx)(r,{children:i.complete?null:(0,a.jsx)(N.Z,{color:"green",basic:!0,content:"Approve",onClick:function(){return e.onApprove()}})}),(0,a.jsx)(r,{children:i.complete?null:(0,a.jsx)(N.Z,{color:"teal",basic:!0,content:"Finalize",onClick:function(){return t.onFinalize()}})})]})}}])&&H(t.prototype,n),r&&H(t,r),i}(s.Component);function W(e,t,n,r,o,a,s){try{var i=e[a](s),c=i.value}catch(l){return void n(l)}i.done?t(c):Promise.resolve(c).then(r,o)}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return!t||"object"!==$(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q(e);if(t){var o=Q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return V(this,n)}}var te=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(c,e);var t,n,r,s=ee(c);function c(){return J(this,c),s.apply(this,arguments)}return t=c,r=[{key:"getInitialProps",value:function(e){return(t=o().mark((function t(){var n,r,a,s,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.query.address,r=(0,C.Z)(n),t.next=4,r.methods.getRequestsCounts().call();case 4:return a=t.sent,t.next=7,r.methods.approversCount().call();case 7:return s=t.sent,t.next=10,Promise.all(Array(parseInt(a)).fill().map((function(e,t){return r.methods.requests(t).call()})));case 10:return i=t.sent,t.abrupt("return",{address:n,requests:i,requestCount:a,approversCount:s});case 12:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function s(e){W(a,r,o,s,i,"next",e)}function i(e){W(a,r,o,s,i,"throw",e)}s(void 0)}))})();var t}}],(n=[{key:"renderRows",value:function(){var e=this;return this.props.requests.map((function(t,n){return(0,a.jsx)(I,{id:n,address:e.props.address,request:t,approversCount:e.props.approversCount},n)}))}},{key:"render",value:function(){var e=A.Header,t=A.Row,n=A.HeaderCell,r=A.Body;return(0,a.jsxs)(i.Z,{children:[(0,a.jsx)("h3",{children:"Requests"}),(0,a.jsx)(E.Link,{route:"/campaigns/".concat(this.props.address,"/requests/new"),children:(0,a.jsx)("a",{children:(0,a.jsx)(N.Z,{primary:!0,floated:"right",style:{marginBottom:10},children:"Add Request"})})}),(0,a.jsxs)(A,{children:[(0,a.jsx)(e,{children:(0,a.jsxs)(t,{children:[(0,a.jsx)(n,{children:"ID"}),(0,a.jsx)(n,{children:"Description"}),(0,a.jsx)(n,{children:"Amount"}),(0,a.jsx)(n,{children:"Recipient"}),(0,a.jsx)(n,{children:"Approval Count"}),(0,a.jsx)(n,{children:"Approve"}),(0,a.jsx)(n,{children:"Finalize"})]})}),(0,a.jsx)(r,{children:this.renderRows()})]}),(0,a.jsxs)("div",{children:["Found ",this.props.requestCOunt," requests."]})]})}}])&&M(t.prototype,n),r&&M(t,r),c}(s.Component)}},function(e){e.O(0,[774,482,406,416,888,179],(function(){return t=19553,e(e.s=t);var t}));var t=e.O();_N_E=t}]);